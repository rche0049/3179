{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 400,
  "height": 300,
  "title": " ",
  "data": {
    "url": "https://raw.githubusercontent.com/rche0049/3179/main/International_Chess_Stats_Complete.csv",
    "format": {
      "type": "csv"
    }
  },
  "config": {
    "axis": {
      "grid": false,
      "title":null,
      "titleFontWeight": "normal" 
    }
  },
  "transform": [
    {
      "calculate": "datum.GMs + datum.IMs + datum.FMs + datum.WGMs + datum.WIMs + datum.WFMs",
      "as": "TotalTitles"
    },
    {
      "window": [{"op": "rank", "as": "rank"}],
      "sort": [{"field": "TotalTitles", "order": "descending"}]
    },
    {
      "filter": {
        "or": [
          {"field": "rank", "lte": 9},
          {"field": "Country", "equal": "Russia"}
        ]
      }
    },
    {
      "fold": ["GMs", "IMs", "FMs", "WGMs", "WIMs", "WFMs"],
      "as": ["Title", "Count"]
    }
  ],
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "Country",
      "type": "nominal"
    },
    "y": {
      "field": "Count",
      "title": "Total",
      "type": "quantitative"
    },
    "color": {
      "field": "Title",
      "type": "nominal"
    }
  },
  "view": {"stroke": null}
}
