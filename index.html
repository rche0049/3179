<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>
  <script src="vega_lite_vis.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="header-bar">
    <!-- Header -->
    <h1>The world of chess</h1>
  </header>
  <div id="container">
  <!-- intro text -->
  <div class = "intro">
    <div class = "content">
      <h3>The Chess Craze: From Novices to Grandmasters</h3>
      <p>In recent years, chess has witnessed a significant surge in popularity, emerging as a strategic and intellectually engaging pastime for millions around the globe. </p>
        <p>As a result of its soaring popularity, competitive chess has become an increasingly prominent pursuit. Governed by the Fédération Internationale des Échecs (FIDE), 
          FIDE has become the norm, the legitimizing body, and the primary rating system. The FIDE rating system has played a pivotal role in evaluating players' skills and providing a 
          standardized measure of their prowess, from aspiring novices to seasoned grandmasters.</p>
          <p>What's fascinating is the diverse demographic landscape of chess enthusiasts, reflecting a blend of cultures, genders, and age brackets. This inclusivity is reshaping the chess community and making it more accessible than ever, 
            ensuring that the ancient game continues to thrive as a competitive and intellectually stimulating pursuit.
      </p>
    </div>
    <img src="chess_in_park.png" alt="people playing chess in park">
  </div>
  <!-- map -->
  <div class = "map">
    <h3>Global Average FIDE Chess Rating by Country (2022)</h3>
  <div id="vis"></div>
  <p class="figure"><strong>Figure 1</strong> World map of country FIDE ratings</p>
</div>
  <!-- total gm bar chart --> 
  <div class = "item_container">
  <div id="bar_chart"></div>
  </div>
  <!-- total gm bar chart -->
  <div id="heat_map"></div>
</div>
  <footer class="footer-bar">
    <!-- Footer content goes here -->
    <p>&copy; 2023 Your Website</p>
  </footer>
</div>
  <script>
    const spec = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 900,
  "height": 600,
  "data": {
    "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
    "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
  },
  "projection": {"type": "equalEarth"},
  "layer": [
    {
      "transform": [
        {
          "calculate": "'Data is not available in ' + datum.properties.NAME",
          "as": "note"
        }
      ],
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"},
      "encoding": {"tooltip": {"field": "note"}}
    },
    {
      "transform": [
        {
          "lookup": "properties.NAME",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/rche0049/3179/main/International_Chess_Map.csv"
            },
            "key": "Country",
            "fields": ["FIDEAverage"]
          }
        },
        { "calculate" : "datum.FIDEAverage", "as": "FIDEAverage"  }
      ],
      "mark": {"type": "geoshape", "stroke": "white"},
      "encoding": {
        "color": {
          "field": "FIDEAverage",
          "type": "quantitative",
          "scale": {
            "type": "quantitative",
            "domain": [1000,1300,1600,1900,2100,2400],
            "range": ["#9BDEA6", "#81C784", "#56A953", "#1E6B27"]



          }
        },
        "tooltip": [
          {"field": "properties.NAME", "type": "nominal", "title": "Country"},
          {"field": "FIDEAverage", "type": "quantitative",  "title": "Average FIDE Rating"} 
        ]
      }
    }
  ],
  "config": {}
};
    vegaEmbed("#vis", spec, {"actions":false},{mode: "vega-lite"}).then(console.log).catch(console.warn);
  </script>

</body>
</html>